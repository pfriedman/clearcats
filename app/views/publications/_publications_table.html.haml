%table.records
  %tr
    %th Select
    %th
      = order search, :by => :nucats_assisted, :as => "NUCATS Assisted", :params => { :controller => "publications", :action => "index", :person_id => @person.id }
    %th Reporting Years
    %th
      = order search, :by => :pmcid, :as => "PMCID", :params => { :controller => "publications", :action => "index", :person_id => @person.id }
    %th
      = order search, :by => :pmid, :as => "PMID", :params => { :controller => "publications", :action => "index", :person_id => @person.id }
    %th
      = order search, :by => :nihms_number, :as => "NIHMS Number", :params => { :controller => "publications", :action => "index", :person_id => @person.id }
    %th
      = order search, :by => :publication_date, :as => "Publication Date", :params => { :controller => "publications", :action => "index", :person_id => @person.id }
    %th
      = order search, :by => :title, :as => "Title", :params => { :controller => "publications", :action => "index", :person_id => @person.id }
    %th History
  - publications.each do |pub|
    %tr{ :class => cycle('even_record', 'odd_record') }
      %td= link_to "Edit", { :controller => "/publications", :action => "edit", :id => pub, :person_id => @person.id, :search => params[:search] }, { :class => "edit_modal_form_link edit_link icon_link", :onclick => "return edit_modal_form(this)" }
      %td= h pub.nucats_assisted? ? "Yes" : "No"
      %td= h pub.ctsa_reporting_years.blank? ? "n/a" : pub.ctsa_reporting_years.join(",")
      %td= h pub.pmcid
      %td= h pub.pmid
      %td= h pub.nihms_number
      %td= h pub.publication_date
      %td= h pub.title
      %td= link_to 'View', versions_publication_path(pub), :class => "show_link icon_link"
